<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daftar Venue - SportifyField</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Register Venue Page Styles */
    .register-venue-hero {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 60px 0 40px;
      text-align: center;
    }

    .register-venue-hero h1 {
      font-size: 32px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 12px;
    }

    .register-venue-hero p {
      font-size: 16px;
      color: #666;
      max-width: 600px;
      margin: 0 auto;
    }

    .register-venue-content {
      padding: 40px 0 60px;
      background: #fff;
    }

    .register-venue-grid {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 40px;
      max-width: 1000px;
      margin: 0 auto;
    }

    /* Form Styles */
    .venue-form-container {
      background: #fff;
    }

    .venue-form-container h2 {
      font-size: 18px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 24px;
    }

    .form-section {
      margin-bottom: 32px;
    }

    .form-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 16px;
    }

    .form-group-venue {
      margin-bottom: 16px;
    }

    .form-group-venue label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 6px;
    }

    .form-group-venue label .required {
      color: #ef4444;
    }

    .input-with-icon {
      position: relative;
    }

    .input-with-icon i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      font-size: 14px;
    }

    .input-with-icon input,
    .input-with-icon select,
    .input-with-icon textarea {
      width: 100%;
      padding: 12px 12px 12px 40px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      color: #374151;
      background: #fff;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .input-with-icon input:focus,
    .input-with-icon select:focus,
    .input-with-icon textarea:focus {
      outline: none;
      border-color: #E53935;
      box-shadow: 0 0 0 3px rgba(229, 57, 53, 0.1);
    }

    .input-with-icon input::placeholder,
    .input-with-icon textarea::placeholder {
      color: #9ca3af;
    }

    .input-with-icon select {
      appearance: none;
      cursor: pointer;
      padding-right: 40px;
    }

    .input-with-icon .select-arrow {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      pointer-events: none;
    }

    .input-with-icon textarea {
      min-height: 80px;
      resize: vertical;
      padding-top: 12px;
    }

    .input-no-icon input {
      width: 100%;
      padding: 12px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      color: #374151;
      background: #fff;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .input-no-icon input:focus {
      outline: none;
      border-color: #E53935;
      box-shadow: 0 0 0 3px rgba(229, 57, 53, 0.1);
    }

    .input-no-icon input::placeholder {
      color: #9ca3af;
    }

    /* Upload Area */
    .upload-area {
      border: 2px dashed #e5e7eb;
      border-radius: 12px;
      padding: 32px;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.2s, background-color 0.2s;
    }

    .upload-area:hover {
      border-color: #E53935;
      background-color: #fef2f2;
    }

    .upload-area i {
      font-size: 32px;
      color: #9ca3af;
      margin-bottom: 12px;
    }

    .upload-area p {
      font-size: 14px;
      color: #374151;
      margin-bottom: 4px;
    }

    .upload-area span {
      font-size: 12px;
      color: #9ca3af;
    }

    .upload-area input[type="file"] {
      display: none;
    }

    /* Terms Checkbox */
    .terms-checkbox {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin: 24px 0;
      font-size: 13px;
      color: #6b7280;
    }

    .terms-checkbox input[type="checkbox"] {
      width: 16px;
      height: 16px;
      margin-top: 2px;
      accent-color: #E53935;
      cursor: pointer;
    }

    .terms-checkbox a {
      color: #E53935;
      text-decoration: none;
    }

    .terms-checkbox a:hover {
      text-decoration: underline;
    }

    /* Submit Button */
    .btn-submit-venue {
      width: 100%;
      padding: 14px 24px;
      background: #E53935;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
    }

    .btn-submit-venue:hover {
      background: #c62828;
      transform: translateY(-1px);
    }

    .btn-submit-venue:disabled {
      background: #cbd5e1;
      cursor: not-allowed;
      transform: none;
    }

    /* Fix for sticky positioning */
    html,
    body {
      overflow: visible !important;
    }

    /* Ensure no ancestors break sticky context */
    .register-venue-content,
    .container,
    .register-venue-grid {
      overflow: visible !important;
      transform: none !important;
    }

    /* Sidebar - Benefits */
    .venue-sidebar {
      position: static;
      align-self: start;
    }

    .benefits-card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
      position: static !important;
    }

    .benefits-card h3 {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 20px;
    }

    .benefit-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 14px;
    }

    .benefit-item:last-child {
      margin-bottom: 0;
    }

    .benefit-item i {
      color: #22c55e;
      font-size: 14px;
      margin-top: 2px;
      flex-shrink: 0;
    }

    .benefit-item span {
      font-size: 14px;
      color: #374151;
      line-height: 1.5;
    }

    /* Promo Card */
    .promo-card {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 20px;
      position: static !important;
    }

    .promo-card .promo-badge {
      display: inline-block;
      background: #E53935;
      color: #fff;
      font-size: 12px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 4px;
      margin-bottom: 8px;
    }

    .promo-card p {
      font-size: 13px;
      color: #374151;
      line-height: 1.5;
    }

    /* Help Card */
    .help-card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 20px;
      position: static !important;
    }

    .help-card h4 {
      font-size: 14px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 12px;
    }

    .help-item {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      font-size: 13px;
      color: #374151;
    }

    .help-item:last-child {
      margin-bottom: 0;
    }

    .help-item i {
      color: #E53935;
      font-size: 14px;
      width: 16px;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .register-venue-grid {
        grid-template-columns: 1fr;
      }

      .venue-sidebar {
        position: static;
      }
    }

    @media (max-width: 640px) {
      .register-venue-hero {
        padding: 40px 20px 30px;
      }

      .register-venue-hero h1 {
        font-size: 24px;
      }

      .register-venue-content {
        padding: 20px 0 40px;
      }
    }

    /* User Avatar in Nav */
    .nav-user {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #E53935;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
    }

    .nav-user-name {
      font-size: 14px;
      font-weight: 500;
      color: #374151;
    }

    .nav-user-name i {
      margin-left: 4px;
      font-size: 12px;
      color: #9ca3af;
    }
  </style>
</head>

<body>

  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="nav-wrapper">
        <div class="logo">
          <img src="Asset/Navbar.png" alt="SportifyField Logo" class="logo-img">
          <span class="logo-text">SportifyField</span>
        </div>
        <nav class="nav-menu">
          <a href="index.html" class="nav-link active">Beranda</a>
          <a href="lapangan.html" class="nav-link">Lapangan</a>
        </nav>
        <div class="nav-actions">
          <!-- Content will be injected by nav.js -->
          <a href="login.html" class="nav-link">Login</a>
          <a href="register.html" class="btn-register">Register</a>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="register-venue-hero">
    <div class="container">
      <h1>Daftarkan Venue Olahraga Anda</h1>
      <p>Bergabunglah dengan SportifyField dan tingkatkan okupansi venue Anda hingga 300%</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="register-venue-content">
    <div class="container">
      <div class="register-venue-grid">
        <!-- Left Column - Form -->
        <div class="venue-form-container">
          <h2>Form Pendaftaran</h2>

          <form id="venueForm">
            <!-- Informasi Venue -->
            <div class="form-section">
              <div class="form-section-title">Informasi Venue</div>

              <div class="form-group-venue">
                <label>Nama Venue<span class="required">*</span></label>
                <div class="input-with-icon">
                  <i class="fas fa-building"></i>
                  <input type="text" id="venue-name" placeholder="Arena Futsal Premium" required>
                </div>
              </div>

              <div class="form-group-venue">
                <label>Jenis Olahraga<span class="required">*</span></label>
                <div class="input-with-icon">
                  <i class="fas fa-futbol"></i>
                  <select id="sport-type" required>
                    <option value="">Pilih jenis olahraga</option>
                    <option value="futsal">Futsal</option>
                    <option value="badminton">Badminton</option>
                    <option value="basket">Basket</option>
                    <option value="tennis">Tennis</option>
                    <option value="volly">Volly</option>
                    <option value="renang">Renang</option>
                  </select>
                  <i class="fas fa-chevron-down select-arrow"></i>
                </div>
              </div>

              <div class="form-group-venue">
                <label>Deskripsi Venue</label>
                <div class="input-with-icon">
                  <i class="fas fa-align-left" style="top: 16px; transform: none;"></i>
                  <textarea id="venue-description"
                    placeholder="Jelaskan fasilitas dan keunggulan venue Anda..."></textarea>
                </div>
              </div>

              <div class="form-group-venue">
                <label>Harga per Jam (Rp)</label>
                <div class="input-no-icon">
                  <input type="number" id="price" placeholder="150000">
                </div>
              </div>
            </div>

            <!-- Informasi Pemilik -->
            <div class="form-section">
              <div class="form-section-title">Informasi Pemilik</div>

              <div class="form-group-venue">
                <label>Nama Lengkap<span class="required">*</span></label>
                <div class="input-with-icon">
                  <i class="fas fa-user"></i>
                  <input type="text" id="owner-name" placeholder="Mutisa Lutfik N" required>
                </div>
              </div>

              <div class="form-group-venue">
                <label>Email<span class="required">*</span></label>
                <div class="input-with-icon">
                  <i class="fas fa-envelope"></i>
                  <input type="email" id="owner-email" placeholder="your@email.com" required>
                </div>
              </div>

              <div class="form-group-venue">
                <label>Nomor Telepon <span class="required">*</span></label>
                <div class="input-with-icon">
                  <i class="fas fa-phone"></i>
                  <input type="tel" id="owner-phone" placeholder="+62 812-3456-7890" required>
                </div>
              </div>
            </div>

            <!-- Lokasi Venue -->
            <div class="form-section">
              <div class="form-section-title">Lokasi Venue</div>

              <div class="form-group-venue">
                <label>Alamat Lengkap</label>
                <div class="input-with-icon">
                  <i class="fas fa-map-marker-alt"></i>
                  <input type="text" id="address" placeholder="Jl. Sudirman No. 123">
                </div>
              </div>

              <div class="form-group-venue">
                <label>Kota</label>
                <div class="input-no-icon">
                  <input type="text" id="city" placeholder="Jakarta">
                </div>
              </div>
            </div>

            <!-- Dokumen Pendukung -->
            <div class="form-section">
              <div class="form-section-title">Dokumen Pendukung</div>

              <div class="form-group-venue">
                <label>Foto Venue</label>
                <div class="upload-area" id="uploadArea">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <p>Klik untuk upload atau drag & drop</p>
                  <span>PNG, JPG up to 10MB</span>
                  <input type="file" id="venue-photo" accept="image/png, image/jpeg">
                </div>
              </div>
            </div>

            <!-- Terms -->
            <div class="terms-checkbox">
              <input type="checkbox" id="terms" required>
              <label for="terms">
                Saya menyetujui <a href="#">Syarat dan Ketentuan</a> serta <a href="#">Kebijakan Privasi</a>
                SportifyField
              </label>
            </div>

            <!-- Submit Button -->
            <button type="button" id="submitVenue" class="btn-submit-venue">
              Daftar Sekarang
            </button>
          </form>
        </div>

        <!-- Right Column - Sidebar -->
        <div class="venue-sidebar">
          <!-- Benefits Card -->
          <div class="benefits-card">
            <h3>Keuntungan Bergabung</h3>
            <div class="benefit-item">
              <i class="fas fa-check-circle"></i>
              <span>Gratis listing untuk 3 bulan pertama</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-check-circle"></i>
              <span>Dashboard manajemen booking yang mudah</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-check-circle"></i>
              <span>Notifikasi real-time setiap booking masuk</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-check-circle"></i>
              <span>Sistem pembayaran otomatis dan aman</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-check-circle"></i>
              <span>Marketing digital gratis di platform Lapanga</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-check-circle"></i>
              <span>Laporan analitik lengkap</span>
            </div>
          </div>

          <!-- Promo Card -->
          <div class="promo-card">
            <span class="promo-badge">Promo Spesial!</span>
            <p>Gratis listing selama 3 bulan pertama untuk pendaftar baru</p>
          </div>

          <!-- Help Card -->
          <div class="help-card">
            <h4>Butuh bantuan?</h4>
            <div class="help-item">
              <i class="fas fa-envelope"></i>
              <span>partner@laparaga.com</span>
            </div>
            <div class="help-item">
              <i class="fas fa-phone"></i>
              <span>+62 812-3456-7890</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <div class="footer-logo">SportifyField</div>
          <p class="footer-description">Platform terpercaya Anda untuk memesan fasilitas olahraga. Memudahkan
            booking venue dengan mudah.</p>
        </div>
        <div class="footer-column">
          <h4>Kontak Kami</h4>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>info@sportifyfield.com</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>+62 812-3456-7890</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>Bandung, Indonesia</span>
          </div>
        </div>
        <div class="footer-column">
          <h4>Ikuti Kami</h4>
          <div class="social-icons">
            <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <p>Â© 2024 SportifyField. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- FIREBASE SCRIPT -->
  <script type="module">
    import { onAuthStateChange, getUserData } from "./auth.js";
    import { initNavigation } from "./nav.js";
    import { db } from "./firebase-config.js";
    import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Initialize Navigation UI
    initNavigation();

    // Auth state handler for Form Pre-filling
    onAuthStateChange(async (user) => {
      if (user) {
        // Get user data for pre-filling form
        const userData = await getUserData(user.uid);

        // Pre-fill form with user data
        if (userData) {
          document.getElementById('owner-name').value = userData.name || '';
          document.getElementById('owner-email').value = userData.email || '';
          document.getElementById('owner-phone').value = userData.phone || '';
        }
      }
    });

    // Upload area click handler
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('venue-photo');

    uploadArea.addEventListener('click', () => {
      fileInput.click();
    });

    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        const fileName = e.target.files[0].name;
        uploadArea.querySelector('p').textContent = fileName;
        uploadArea.querySelector('i').className = 'fas fa-check-circle';
        uploadArea.querySelector('i').style.color = '#22c55e';
      }
    });

    // Drag and drop
    uploadArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      uploadArea.style.borderColor = '#E53935';
      uploadArea.style.backgroundColor = '#fef2f2';
    });

    uploadArea.addEventListener('dragleave', (e) => {
      e.preventDefault();
      uploadArea.style.borderColor = '#e5e7eb';
      uploadArea.style.backgroundColor = '';
    });

    uploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadArea.style.borderColor = '#e5e7eb';
      uploadArea.style.backgroundColor = '';

      if (e.dataTransfer.files.length > 0) {
        fileInput.files = e.dataTransfer.files;
        const fileName = e.dataTransfer.files[0].name;
        uploadArea.querySelector('p').textContent = fileName;
        uploadArea.querySelector('i').className = 'fas fa-check-circle';
        uploadArea.querySelector('i').style.color = '#22c55e';
      }
    });

    // Form submission
    document.getElementById("submitVenue").addEventListener("click", async () => {
      const termsCheckbox = document.getElementById('terms');

      if (!termsCheckbox.checked) {
        alert("Harap setujui Syarat dan Ketentuan terlebih dahulu");
        return;
      }

      const data = {
        venueName: document.getElementById("venue-name").value,
        sportType: document.getElementById("sport-type").value,
        description: document.getElementById("venue-description").value,
        price: document.getElementById("price").value,
        ownerName: document.getElementById("owner-name").value,
        ownerEmail: document.getElementById("owner-email").value,
        ownerPhone: document.getElementById("owner-phone").value,
        address: document.getElementById("address").value,
        city: document.getElementById("city").value,
        status: "pending",
        createdAt: serverTimestamp()
      };

      // Validate required fields
      if (!data.venueName || !data.sportType || !data.ownerName || !data.ownerEmail || !data.ownerPhone) {
        alert("Harap isi semua field yang wajib (*) terlebih dahulu");
        return;
      }

      try {
        const submitBtn = document.getElementById("submitVenue");
        submitBtn.textContent = "Mendaftar...";
        submitBtn.disabled = true;

        await addDoc(collection(db, "venue_registrations"), data);

        alert("Pendaftaran venue berhasil! Tim kami akan menghubungi Anda dalam 1-2 hari kerja.");
        window.location.href = "index.html";
      } catch (error) {
        console.error("Error:", error);
        alert("Gagal mendaftarkan venue: " + error.message);

        const submitBtn = document.getElementById("submitVenue");
        submitBtn.textContent = "Daftar Sekarang";
        submitBtn.disabled = false;
      }
    });
  </script>

  <script src="script.js"></script>
</body>

</html>